{% extends 'main.html' %} {% load static %}

<!--  -->
{% block content %}
<div class="h-100 grid gap-4">
  <div class="flex justify-between items-center gap-4">
    <div class="flex justify-between items-center text-sm gap-1">
      <a
        id="back-button"
        class="inline-block px-3 py-2 text-white bg-green-700 hover:bg-green-900 rounded-lg transition-all duration-300"
        href="#"
        >&larr;</a
      >

      <form
        action="{% url 'sale_point' %}"
        method="get"
        class="w-full flex justify-between items-center gap-1 text-sm"
      >
        <!-- name field -->
        <input
          placeholder="Article"
          name="name"
          type="text"
          class="px-3 py-2 rounded-md border focus:bg-gray-100 focus:outline-none focus:ring-1 focus:ring-green-500 w-full cursor-pointer"
        />
        <!-- brand field -->
        <input
          placeholder="Marque"
          name="brand"
          type="text"
          class="px-3 py-2 rounded-md border focus:bg-gray-100 focus:outline-none focus:ring-1 focus:ring-green-500 w-full cursor-pointer"
        />
        <select
          name="category"
          class="hidden sm:flex px-3 py-2 rounded-md border focus:bg-gray-100 focus:outline-none focus:ring-1 focus:ring-green-500 w-full cursor-pointer"
        >
          <option value="" selected="true" disabled="disabled">
            Catégories
          </option>
          {% for obj in categories %}
          <option value="{{obj.id}}">{{obj.name}}</option>
          {% endfor %}
        </select>
        <select
          name="family"
          class="hidden sm:flex px-3 py-2 rounded-md border focus:bg-gray-100 focus:outline-none focus:ring-1 focus:ring-green-500 w-full cursor-pointer"
        >
          <option value="" selected="true" disabled="disabled">Famille</option>
          {% for obj in families %}
          <option value="{{obj.id}}">{{obj.name}}</option>
          {% endfor %}
        </select>
        <!--  -->
        {% include 'base/components/store_filter.html' %}
        <!--  -->
        <button
          class="px-3 py-2 bg-green-700 hover:bg-green-900 text-white rounded-lg transition duration-200 ease-in"
          type="submit"
        >
          <i class="fa-solid fa-filter"></i>
        </button>
        <button
          class="px-3 py-2 bg-lime-200 hover:bg-lime-400 hover:text-black rounded-lg transition duration-200 ease-in"
          hx-on:click="clearForm('filter')"
          type="submit"
        >
          <i class="fa-solid fa-rotate-right"></i>
        </button>
      </form>
    </div>
    <!--  -->
    <div class="flex flex-row-reverse w-full md:max-w-[350px]">
      <button
        onclick="hide_dialogs()"
        hx-target="#basic_dialog"
        hx-get="{% url 'create_client' %}"
        class="bg-lime-200 hover:bg-lime-300 rounded-lg py-2 px-4  text-black flex items-center gap-4 group"
      >
        Nouveau client
        <i class="text-sm fa-solid fa-plus ml-2"></i>
      </button>
    </div>
  </div>

  <section class="w-full h-100 flex flex-col md:flex-row gap-4">
    <!-- products -->
    <div
      class="overflow-y-auto border bg-gray-100 w-full h-full min-h-80 rounded-2xl flex flex-col"
    >
      <div class="p-3">
        {% if not products %}
        <div
          class="flex flex-col justify-center items-center gap-2 my-20 mx-auto"
        >
          <i class="fa-solid fa-box-open text-green-700 text-9xl"></i>
          <span>Aucun produit trouvé</span>
        </div>
        {% else %}
        <div class="grid lg:grid-cols-2 gap-2 lg:grid-cols-2 xl:grid-cols-3">
          {% for obj in products %}
          <!--  -->
          {% include 'base/components/product_sale_card.html' %}
          <!--  -->
          {% endfor %}
        </div>

        {% include 'paginator.html' %}
        <!--  -->
        {% endif %}
      </div>
    </div>
    <!-- cart -->
    <div id="cart" class="w-full h-full lg:max-w-[300px] 2xl:max-w-[350px]">
      {% include 'base/partials/cart.html' %}
    </div>
  </section>
</div>
{% endblock %}
