{% extends 'main.html' %} {% load static %} {% block content %}

<div class="flex flex-col gap-4">
  <div
    class="p-6 bg-green-100 rounded-3xl h-full w-full max-w-7xl mx-auto flex flex-col justify-between gap-6"
  >
    <div class="flex justify-between">
      <a
        id="back-button"
        class="inline-block px-3 py-2 text-white bg-green-700 hover:bg-green-900 rounded-lg transition-all duration-300"
        href="#"
        >&larr;
      </a>
      {% if curr_obj.is_valid %}
      <span
        class="flex items-center gap-4 py-2 px-4 rounded-xl bg-green-300 text-black"
        ><i class="fa-solid fa-eye"></i>Inventaire N°-<b
          >000-{{ curr_obj.id}}</b
        ></span
      >
      {% else %}
      <span
        class="flex items-center gap-4 py-2 px-4 rounded-xl bg-orange-300 text-black"
        ><i class="fa-solid fa-eye-slash"></i>Inventaire N°-<b
          >000-{{ curr_obj.id}}</b
        ></span
      >
      {% endif %}
    </div>

    <div class="w-full flex flex-col gap-2">
      <h2 class="text-4xl font-bold text-black">{{curr_obj.date}}</h2>

      {% include 'base/partials/stock/inventory_formset.html' %}

    </div>
  </div>

  <div class="flex flex-col gap-3">
    <b>Liste des produits</b>

    <table id="items_table" class="w-full text-left db-table">
      <thead class="bg-green-700 border border-green-900 text-white">
        <tr>
          <th class="px-3 py-4 text-sm">Image</th>
          <th class="px-3 py-4 text-sm">Article</th>
          <th class="px-3 py-4 text-sm">Quantité théorique</th>
          <th class="px-3 py-4 text-sm">Quantité physique</th>
          <th class="px-3 py-4 text-sm">Commentaire</th>
        </tr>
      </thead>

      <tbody class="border">
        {% for obj in inventory_items %}
        <tr
          class="text-gray-600 border text-sm hover:bg-white hover:text-black transition-all duration-300"
        >
          <td class="px-3 py-1">
            {% if obj.product_stock.product.image %}
            <img
              class="h-7 text-gray-200"
              src="{{obj.product_stock.product.image.url}}"
              alt="item image"
            />
            {% else %}
            <img
              class="h-7 text-gray-200"
              src="{% static 'imgs/logo.png' %}"
              alt="image"
            />
            {% endif %}
          </td>
          <td class="px-3 py-1">{{obj.product_stock.product.name}}</td>
          <td class="px-3 py-1">
            {{ obj.quantity_expected }}
            <!--  -->
            {{ obj.product_stock.product.get_unit_display }}
          </td>
          <td class="px-3 py-1">
            {{ obj.quantity_found }}
            <!--  -->
            {{ obj.product_stock.product.get_unit_display }}
          </td>
          <td class="px-3 py-1">{{ obj.comment }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
