{% extends 'main.html' %} {% load static %} {% block content %}
<div class="w-full max-w-7xl mx-auto flex flex-col gap-4">
  <div class="flex justify-between items-center">
    <a
      id="back-button"
      class="inline-block px-3 py-2 text-white bg-green-700 hover:bg-green-900 rounded-lg transition-all duration-300"
      href="#"
      >&larr;
    </a>
    <!--------------------------------------- menu tabs buttons --------------------------------------->
    <div
      class="flex justify-between gap-2 text-xs tabbar h-fit w-full lg:max-w-[500px] p-2 bg-green-700 rounded-xl"
    >
      <button
        class="tabBtn px-4 py-2 bg-white hover:bg-green-700 hover:text-white rounded-lg w-full"
        onclick="openTab(event, 'prods')"
        id="defaultTab"
      >
        <i class="fa-solid fa-box"></i>
        <span class="ml-2">Achats de produits</span>
      </button>
      <button
        class="tabBtn px-4 py-2 bg-white hover:bg-green-700 hover:text-white rounded-lg w-full"
        onclick="openTab(event, 'servs')"
      >
        <i class="fa-solid fa-hand"></i>
        <span class="ml-2">Achats de  services</span>
      </button>
    </div>
  </div>

  <section class="flex flex-col gap-4">
    <div id="prods" class="tabcontent w-full flex flex-col gap-2">
      <div
        class="w-full flex justify-between items-center mb-4"
      >
        <button
          onclick="hide_dialogs()"
          hx-target="#basic_dialog"
          hx-get="{% url 'create_prod_purchase' %}"
          class="px-4 py-2 flex items-center text-sm text-black bg-lime-200 hover:bg-lime-300 rounded-lg w-fit text-center cursor-pointer"
        >
        Nouvel achat de produit
        <i class="text-sm fa-solid fa-plus ml-2"></i>
        </button>
      </div>
      <div
        class="prod_purchases_list"
        hx-get="{% url 'prod_purchases_list' %}"
        hx-trigger="load, db_changed from:body"
        hx-target="this"
      ></div>
    </div>
    <!--  -->
    <div id="servs" class="tabcontent w-full flex flex-col gap-2">
      <div
        class="w-full flex justify-between items-center mb-4"
      >
        <button
          onclick="hide_dialogs()"
          hx-target="#basic_dialog"
          hx-get="{% url 'create_serv_purchase' %}"
          class="px-4 py-2 flex items-center text-sm text-black bg-lime-200 hover:bg-lime-300 rounded-lg w-fit text-center cursor-pointer"
        >
        Nouvel achat de service
        <i class="text-sm fa-solid fa-plus ml-2"></i>
        </button>
      </div>
      <div
        class="serv_purchases_list"
        hx-get="{% url 'serv_purchases_list' %}"
        hx-trigger="load, db_changed from:body"
        hx-target="this"
      ></div>
    </div>
  </section>
</div>

<script>
  function clearForm(div_id) {
    var form = document.getElementById(div_id);
    form.reset();
  }

  backBtn = document.getElementById("back-button")
    
  backBtn.addEventListener("click", function (event) {
      event.preventDefault(); // Prevent the default anchor behavior
      window.history.go(-1); // Go back two pages
    });

document.getElementById("defaultTab").click();

function openTab(event, tabName) {
  var i, tabcontent, tabBtn;
  tabcontent = document.getElementsByClassName("tabcontent");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }
  tabBtn = document.getElementsByClassName("tabBtn");
  for (i = 0; i < tabBtn.length; i++) {
    tabBtn[i].className = tabBtn[i].className.replace(" active", "");
  }
  document.getElementById(tabName).style.display = "block";
  event.currentTarget.className += " active";
  var minitabs = document.getElementsByClassName("minitabcontent");
  if (minitabs.length != 0) {
    minitabs = tabcontent.children;
  }
}
</script>
{% endblock %}
